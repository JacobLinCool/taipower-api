!function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e){addEventListener("fetch",t=>{t.respondWith(async function(t){let e=await fetch("https://www.taipower.com.tw/d006/loadGraph/loadGraph/data/genary.json").then(t=>t.json()),r=await fetch("https://www.taipower.com.tw/d006/loadGraph/loadGraph/data/loadpara.json").then(t=>t.json()),a={time:e[""],usage:{current:parseFloat(10*r.records[0].curr_load)},statistics:{total:0},plants:{}};e.aaData.forEach(t=>{if("小計"==t[1])return;let e={type:"",name:t[1].replaceAll(/\(註\d{1,2}\)/g,"").replaceAll(/&amp;/g,"&"),max:parseFloat(t[2])||0,now:parseFloat(t[3])||0,percentage:parseInt(parseFloat(t[3])/parseFloat(t[2])*1e3)/10,description:t[5].trim()};try{e.type=Array.from(t[0].matchAll(/<b>([^]+?)<\/b>/g))[0][1]}catch(t){}a.plants[e.type]||(a.plants[e.type]=[]),a.statistics[e.type]||(a.statistics[e.type]=0),a.plants[e.type].push(e),a.statistics[e.type]+=e.now});for(let[t,e]of Object.entries(a.statistics))a.statistics[t]=parseInt(100*e)/100;return a.statistics.total=parseInt(100*Object.values(a.statistics).reduce((t,e)=>t+e))/100,a.usage.percentage=parseInt(a.usage.current/a.statistics.total*100),new Response(JSON.stringify(a,null,4),{headers:{"Content-Type":"application/json","Cross-Origin-Resource-Policy":"cross-origin","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}})}(t.request))})}]);